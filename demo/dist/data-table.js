(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{369:function(t,e,n){"use strict";n.r(e);var a=n(680),o=n(523);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n(658);var s=n(383),r=n(445),l=n.n(r),u=n(693),d=Object(s.a)(o.default,a.a,a.b,!1,null,null,null);l()(d,{VIcon:u.a}),d.options.__file="src/vue/ld-data-table.vue",e.default=d.exports},446:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(504),i=(a=o)&&a.__esModule?a:{default:a};e.default={mixins:[i.default],props:{endpoint:String,graph:String},data:function(){return{loading:0,requests:{},offset:null,loadedOffset:null,rows:[],rowCount:null,pageSize:10,uniqueField:null,sortField:null,sortDirection:"ASC",queryTemplate:"",countQueryTemplate:"",search:"",fields:[]}},computed:{from:function(){return this.graph?"FROM <"+this.graph+">":""},filters:function(){if(!this.search.trim().length||!this.searchFields.trim().length)return"";var t=this.searchFields.split(/[,\s]+/),e=this.search.split(/[\s]+/).filter(function(t){return!t.match(/^\s*$/)}).map(function(e){return"("+t.map(function(t){return(e=e.replace(/["';<>]/,"")).length?"regex(str(?"+t+'), "'+e.replace(/["';<>]/,"")+'", "i")':""}).join(" || ")+")"});return"FILTER("+e.join(" ) && ( ")+")"},page:function(){return 1+Math.ceil(this.offset/this.pageSize)},pageCount:function(){return Math.ceil(this.rowCount/this.pageSize)},prevOffset:function(){return this.rowCount?Math.max(0,this.offset-this.pageSize):null},nextOffset:function(){if(!this.rowCount)return null;var t=this.offset+this.pageSize;return t>this.rowCount-1&&(t=this.offset),t}},watch:{rows:function(t){t&&this.countRows()},offset:_.debounce(function(t){null!==t&&this.fetchRows()},500),sortField:function(){this.offset=0,this.fetchRows()},sortDirection:function(){this.offset=0,this.fetchRows()},pageSize:function(){this.offset=0,this.fetchRows()},search:_.debounce(function(t){this.offset=this.rowCount=0,this.fetchRows()},500)},methods:{renderQueryTemplate:function(t){var e=void 0;do{e=!0;var n=t.match(/(%([^%]+)%)/);if(n){var a=n[1],o=n[2];if(void 0===this[o]||null===this[o]){t=null,console.log("undefined query template placeholder",o);break}e=!1,t=t.replace(a,this[o])}}while(!e);return t},fetchRows:function(){var t=this,e=this.renderQueryTemplate(this.queryTemplate||"");if(!e)return setTimeout(this.fetchRows,500);this.loading++,this.runQuery(e,function(e){t.fields=e.vars.map(function(t){return{name:t,label:t}}),t.rows=e.rows.filter(t.removeDuplicates),t.loadedOffset=t.offset,setTimeout(function(){return t.loading--},250)})},removeDuplicates:function(t,e,n){if(this.uniqueField&&e&&n[e-1][this.uniqueField]&&n[e-1][this.uniqueField].value===n[e][this.uniqueField].value)return!1;return!0},countRows:function(){var t=this,e=this.renderQueryTemplate(this.countQueryTemplate||"");if(!e)return setTimeout(this.countRows,500);this.runQuery(e,function(e){t.rowCount=e.rows.length?parseInt(e.rows[0].rowCount.value):null})},runQuery:function(t,e){var n=this;if(this.getCachedQueryResults(t))return e(this.getCachedQueryResults(t));var a=t;this.$http.post(this.endpoint,{query:t},{credentials:!0,emulateJSON:!0,headers:{Accept:"application/sparql-results+json, application/json, */*"},before:function(t){this.requests[a]&&this.requests[a].abort(),this.requests[a]=t}}).then(function(o){delete n.requests[a],n.setCachedQueryResults(t,{vars:o.body.head.vars,rows:o.body.results.bindings}),e(n.getCachedQueryResults(t))},function(t){e({vars:[],rows:[]})})},getFieldLabel:function(t,e){return e["_"+t+"Label"]?e["_"+t+"Label"].value:e[t].value.replace(/^.*[\/#]([^\/#]+)$/,"$1")}}}},447:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{subjectBase:null}},mounted:function(){var t=this.resource||document.querySelector("body").getAttribute("about")||location.href;this.subjectBase=t.replace(/^(.+:\/\/[^\/]+)\/.*$/,"$1")},methods:{onClick:function(t){if(!t.target.hasAttribute("href"))return!0;var e=t.target.getAttribute("href");if(0!==e.indexOf(this.subjectBase))return!0;t.preventDefault(),location.href=e.replace(this.subjectBase+"/","/")}}}},504:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}},created:function(){this.initQueryCache()},methods:{initQueryCache:function(){this.$store.state.queryCache||this.$store.registerModule("queryCache",{namespaced:!0,state:{cached:{}},mutations:{set:function(t,e){e.subField?t[e.field][e.subField]=e.value:t[e.field]=e.value}}})},getCachedQueryResults:function(t){return this.$store.state.queryCache.cached[t]||null},setCachedQueryResults:function(t,e){this.$store.commit("queryCache/set",{field:"cached",subField:t,value:e})}}}},523:function(t,e,n){"use strict";n.r(e);var a=n(524),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e.default=o.a},524:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(446)),o=i(n(447));function i(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[a.default,o.default],props:["query","countQuery","resource","searchFields"],data:function(){return{pageSizes:[5,10,20,25,50,100,250]}},watch:{queryTemplate:function(t){t&&this.fetchRows()}},mounted:function(){this.sortFields=this.searchFields||"uri",this.sortField=this.sortFields.split(/[,\s]/).shift(),this.fetchQueryTemplate(),this.fetchCountQueryTemplate()},methods:{fetchQueryTemplate:function(){var t=this;this.$http.get(this.query).then(function(e){t.queryTemplate=e.body})},fetchCountQueryTemplate:function(){var t=this;this.$http.get(this.countQuery).then(function(e){t.countQueryTemplate=e.body})},sort:function(t){t.name===this.sortField?this.sortDirection="ASC"===this.sortDirection?"DESC":"ASC":(this.sortField=t.name,this.sortDirection="ASC")}}}},525:function(t,e,n){var a=n(659);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(131).default)("0b389dc9",a,!1,{})},658:function(t,e,n){"use strict";var a=n(525);n.n(a).a},659:function(t,e,n){(t.exports=n(130)(!1)).push([t.i,'.ld-data-table {\n  transition: opacity 0.5s;\n}\n.ld-data-table .ld-card {\n    min-height: 375px;\n}\n.ld-data-table.loading td, .ld-data-table.loading .controls {\n    opacity: 0.5;\n}\n.ld-data-table .rows {\n    min-height: 300px;\n    overflow: auto;\n}\n.ld-data-table .rows table {\n      width: 100%;\n      max-width: 100%;\n      font-size: 16px;\n      background-color: #fff;\n      border-collapse: collapse;\n      border-spacing: 0;\n      margin: 0;\n      position: relative;\n      overflow: auto;\n      display: table;\n}\n.ld-data-table .rows table thead {\n        vertical-align: middle;\n}\n.ld-data-table .rows table thead th {\n          vertical-align: bottom;\n          margin: 0;\n          text-align: left;\n          padding: 0 16px;\n          font-family: "Lato Light", "Lucida Sans Unicode", "Lucida Grande", sans-serif;\n          color: #666;\n          font-size: 16px;\n          line-height: 40px;\n          border-bottom: 2px solid #4da692;\n          cursor: pointer;\n}\n.ld-data-table .rows table thead th .sort-arrow {\n            font-size: 18px;\n}\n.ld-data-table .rows table thead th .sort-arrow.desc {\n              transform: rotate(-180deg);\n}\n.ld-data-table .rows table thead th.row-index {\n            text-align: right;\n}\n.ld-data-table .rows table tbody td {\n        text-align: left;\n        padding: 8px 16px;\n        border-bottom: 1px solid #f5f5f5;\n        background-color: #fff;\n        line-height: 20px;\n        vertical-align: top;\n        color: #5e5e5e;\n}\n.ld-data-table .rows table tbody td.row-index {\n          text-align: right;\n}\n.ld-data-table .rows table tbody tr:nth-child(even) td {\n        background-color: #f9f9f9;\n}\n.ld-data-table .loader {\n    border-top: 1px solid #f5f5f5;\n    height: 3px !important;\n}\n.ld-data-table .controls {\n    padding: 16px;\n}\n.ld-data-table .controls .search input {\n      width: 100%;\n      padding: 8px 10px;\n      font-size: 14px;\n      line-height: 18px;\n      border: 1px solid #cbd2da;\n      vertical-align: top;\n      margin-bottom: 5px;\n}\n.ld-data-table .controls .search input:focus {\n        border: 1px solid #42796d;\n}\n.ld-data-table .controls .page-size {\n      line-height: 36px;\n      font-size: 16px;\n      padding-left: 4%;\n      text-align: right;\n}\n.ld-data-table .controls .page-size select {\n        max-width: 75px !important;\n}\n.ld-data-table .controls .pagination {\n      text-align: right;\n}\n.ld-data-table .controls .pagination .info {\n        vertical-align: middle;\n        display: inline-block;\n        line-height: 36px;\n        font-size: 16px;\n        padding: 0 16px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n}\n.ld-data-table .controls .buttons {\n      white-space: nowrap;\n}\n.ld-data-table .controls .buttons button {\n        display: inline-block;\n        text-align: center;\n        vertical-align: middle;\n        cursor: pointer;\n        height: 36px;\n        width: 36px;\n        background-color: #4da692;\n        border: none;\n}\n.ld-data-table .controls .buttons button.disabled {\n          cursor: default;\n          background-color: #f5f5f5;\n}\n.ld-data-table .controls .buttons button.disabled:hover, .ld-data-table .controls .buttons button.disabled:focus, .ld-data-table .controls .buttons button.disabled::-moz-focus-inner {\n            cursor: default;\n            background-color: #f5f5f5;\n}\n.ld-data-table .controls .buttons button:hover, .ld-data-table .controls .buttons button:focus, .ld-data-table .controls .buttons button::-moz-focus-inner {\n          background-color: #42796d;\n          outline: 0;\n          border: 0;\n}\n.ld-data-table .controls .buttons button .v-icon {\n          height: 36px;\n          width: 36px;\n          color: #fff;\n          vertical-align: middle;\n}\n@media (max-width: 599px) {\n.ld-data-table .controls .search, .ld-data-table .controls .page-size, .ld-data-table .controls .pagination {\n        text-align: center;\n}\n}\n',""])},680:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ld-data-table",class:{loading:t.loading}},[n("ld-card",[n("div",{staticClass:"rows"},[n("table",[n("thead",[n("tr",[n("th",{staticClass:"row-index"},[t._v("#")]),t._v(" "),t._l(t.fields,function(e){return e.name.match(/^_/)?t._e():n("th",{on:{click:function(n){return t.sort(e)}}},[t._v("\n                            "+t._s(e.label)+"\n                            "),t.sortField===e.name?n("v-icon",{staticClass:"sort-arrow",class:{desc:"DESC"===t.sortDirection}},[t._v("arrow_upward")]):t._e()],1)})],2)]),t._v(" "),n("tbody",[t.loading||0!==t.rowCount?t._e():n("tr",[n("td",{attrs:{colspan:"100"}},[t._v("0 treffers")])]),t._v(" "),t._l(t.rows,function(e,a){return n("tr",[n("td",{staticClass:"row-index"},[t._v(t._s(a+t.loadedOffset+1))]),t._v(" "),t._l(t.fields,function(a){return a.name.match(/^_/)?t._e():n("td",[e[a.name]?"uri"===e[a.name].type?n("a",{attrs:{href:e[a.name].value},on:{click:t.onClick}},[t._v("\n                                "+t._s(t.getFieldLabel(a.name,e))+"\n                            ")]):n("span",[t._v(t._s(e[a.name].value))]):n("span",[t._v("-")])])})],2)})],2)])]),t._v(" "),n("div",{staticClass:"loader",class:{loading:t.loading}}),t._v(" "),n("div",{staticClass:"controls"},[n("flex-container",{attrs:{"no-gutter":""}},[n("flex-item",{attrs:{dsk:"25",tab:"50",mob:"100","no-gutter":""}},[n("form",{staticClass:"search",on:{submit:function(t){t.preventDefault()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Filteren ..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),n("flex-item",{attrs:{dsk:"25",tab:"50",mob:"100","no-gutter":""}},[n("form",{staticClass:"page-size",on:{submit:function(t){t.preventDefault()}}},[t._v("\n                        Per pagina:\n                        "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.pageSize,expression:"pageSize"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.pageSize=e.target.multiple?n:n[0]}}},[t._l(t.pageSizes,function(e){return[n("option",{domProps:{value:e}},[t._v(t._s(e))])]})],2)])]),t._v(" "),n("flex-item",{staticClass:"pagination",attrs:{dsk:"50",tab:"100","no-gutter":""}},[n("span",{staticClass:"info"},[t.pageCount?n("span",{staticClass:"page-info"},[t._v("\n                            Pagina "+t._s(t.page)+"/"+t._s(t.pageCount)+"\n                        ")]):t._e(),t._v(" "),null!==t.rowCount?n("span",{staticClass:"row-count"},[t._v("\n                            ("+t._s(t.rowCount.toLocaleString())+" treffer"+t._s(1!==t.rowCount?"s":"")+")\n                        ")]):t._e()]),t._v(" "),n("span",{staticClass:"buttons"},[null!==t.prevOffset?n("button",{class:{disabled:t.offset===t.prevOffset},attrs:{title:t.prevOffset},on:{click:function(e){t.offset=t.prevOffset}}},[n("v-icon",[t._v("chevron_left")])],1):t._e(),t._v(" "),null!==t.nextOffset?n("button",{class:{disabled:t.offset===t.nextOffset},attrs:{title:t.nextOffset},on:{click:function(e){t.offset=t.nextOffset}}},[n("v-icon",[t._v("chevron_right")])],1):t._e()])])],1)],1)])],1)},o=[];a._withStripped=!0,n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o})}}]);